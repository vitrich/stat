{% extends 'base.html' %}

{% block page_title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}

{% block page_description %}–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Math Letovo Junior{% endblock %}

{% block content %}
<style>
    .lessons-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
    }

    .lesson-card {
        background: white;
        border: 1px solid var(--color-border);
        border-radius: 12px;
        padding: 1.5rem;
        transition: all 0.3s ease;
        cursor: pointer;
        text-decoration: none;
        color: inherit;
        display: block;
    }

    .lesson-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transform: translateY(-4px);
        border-color: var(--color-primary);
    }

    .lesson-date {
        display: inline-block;
        background: var(--color-primary);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 600;
        margin-bottom: 1rem;
    }

    .lesson-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--color-text);
        margin-bottom: 0.75rem;
    }

    .lesson-meta {
        display: flex;
        gap: 1rem;
        font-size: 0.875rem;
        color: var(--color-text-light);
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid var(--color-border);
    }

    .lesson-status {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.375rem 0.75rem;
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 500;
    }

    .lesson-status.completed {
        background: #d1fae5;
        color: #065f46;
    }

    .lesson-status.available {
        background: #dbeafe;
        color: #1e3a8a;
    }

    .welcome-section {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        border: 1px solid var(--color-border);
    }

    .welcome-title {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--color-primary);
        margin-bottom: 1rem;
    }

    .welcome-text {
        color: var(--color-text-light);
        line-height: 1.6;
    }

    .section-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-text);
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .no-lessons {
        background: white;
        border-radius: 12px;
        padding: 3rem;
        text-align: center;
        color: var(--color-text-light);
    }
</style>

{% if user.is_authenticated %}
    <div class="welcome-section">
        <h2 class="welcome-title">üëã –ü—Ä–∏–≤–µ—Ç, {{ user.student.full_name }}!</h2>
        <p class="welcome-text">
            –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É Math Letovo Junior. –ó–¥–µ—Å—å —Ç—ã –Ω–∞–π–¥–µ—à—å –≤—Å–µ —Å–≤–æ–∏ —É—Ä–æ–∫–∏, –∑–∞–¥–∞–Ω–∏—è –∏ —Å–º–æ–∂–µ—à—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å.
        </p>
    </div>

    <h2 class="section-title">üìö –î–æ—Å—Ç—É–ø–Ω—ã–µ —É—Ä–æ–∫–∏</h2>

    {% if lessons %}
    <div class="lessons-grid">
        {% for lesson in lessons %}
        <a href="{% url 'lesson_view' lesson_date=lesson.date %}" class="lesson-card">
            <div class="lesson-date">{{ lesson.date|date:"d.m.Y" }}</div>
            <h3 class="lesson-title">{{ lesson.title }}</h3>

            {% if lesson.completed %}
            <div class="lesson-status completed">
                ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ
            </div>
            {% else %}
            <div class="lesson-status available">
                üìù –î–æ—Å—Ç—É–ø–µ–Ω
            </div>
            {% endif %}

            <div class="lesson-meta">
                <span>‚è±Ô∏è {{ lesson.test_duration_minutes }} –º–∏–Ω</span>
                <span>üìä 7 –∑–∞–¥–∞–Ω–∏–π</span>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-lessons">
        <h3 style="margin-bottom: 1rem; color: var(--color-text);">üì≠ –£—Ä–æ–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
        <p>–ù–æ–≤—ã–µ —É—Ä–æ–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∏—Ö –¥–æ–±–∞–≤–∏—Ç.</p>
    </div>
    {% endif %}

{% else %}
    <div class="welcome-section">
        <h2 class="welcome-title">üìê Math Letovo Junior</h2>
        <p class="welcome-text">
            –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–µ–±–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.
        </p>
        <div style="margin-top: 1.5rem;">
            <a href="{% url 'login' %}" class="btn btn-primary" style="margin-right: 1rem;">–í–æ–π—Ç–∏</a>
            <a href="{% url 'register' %}" class="btn btn-outline">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </div>
    </div>

    <div class="card">
        <h2>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
        <ul style="line-height: 2; color: var(--color-text-light);">
            <li>‚ú® –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —É—Ä–æ–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏</li>
            <li>üìù –°–∏—Å—Ç–µ–º–∞ –∑–∞–¥–∞—á –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
            <li>üë• –†–∞–±–æ—Ç–∞ –≤ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø–∞—Ö</li>
            <li>üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</li>
        </ul>
    </div>
{% endif %}

{% endblock %}
