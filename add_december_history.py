import os
import django

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'web.settings')
django.setup()

from main.models import Student, Group, GroupHistory
from datetime import date

# –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 16.12.2025 (–î–ï–ö–ê–ë–†–¨ - –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞)
december_distribution = {
    # –ì—Ä—É–ø–ø–∞ 1 (4 —É—á–µ–Ω–∏–∫–∞)
    '–ö–æ–Ω–¥—Ä–∞—à–∏–Ω –ú–∞—Ä–∫': 1,
    '–õ–æ–∑–æ–≤—Å–∫–∞—è –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞': 1,
    '–ú–≥–µ–±—Ä–æ–≤ –ê—Ä—Ç—ë–º': 1,
    '–°–∞—Ä–≥—Å—è–Ω –ú–∞—Ä–∏–∞–º': 1,

    # –ì—Ä—É–ø–ø–∞ 2 - –ö—Ä–µ—Å—Ç–Ω–∏–∫–æ–≤–∞ (6 —É—á–µ–Ω–∏–∫–æ–≤)
    '–ê–±–µ–ª—é–∫ –ú–∞—Ä–∏—è': 2,
    '–ë–∞–±–µ–Ω–∫–æ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞': 2,
    '–ö–æ—Ä–æ–ª—å –î–µ–Ω–∏—Å': 2,
    '–ö–æ—Å–º–∞—Ä—Å–∫–∏–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä': 2,
    '–ü–µ—Ä–∏–Ω –î–∞–Ω–∏–∏–ª': 2,
    '–†—ã–ª—å—Å–∫–∞—è –≠–≤–∏–ª–∏–Ω–∞': 2,

    # –ì—Ä—É–ø–ø–∞ 2.1 - –í–∏—Ç—Ä–∏—á–µ–Ω–∫–æ (13 —É—á–µ–Ω–∏–∫–æ–≤)
    '–ê–Ω–æ—à–∏–Ω –ú–∞—Ç–≤–µ–π': 2.1,
    '–ì–æ–Ω—Ç–∞—Ä–µ–≤ –ò–ª—å—è': 2.1,
    '–ï–≥–æ—Ä–æ–≤–∞ –ú–∏—Ä–æ—Å–ª–∞–≤–∞': 2.1,
    '–ö–∞—Ä–Ω–∞—É—Ö –¢–∏–º–æ—Ñ–µ–π': 2.1,
    '–ö–æ—Å—Ç–µ–Ω–∫–æ –ö–∞—Ä–æ–ª–∏–Ω–∞': 2.1,
    '–õ–µ–π—Ç–µ—Å –ú–∞—Ä–∫': 2.1,
    '–ú–∞—Ä—Ç–∏—Ä–æ—Å—è–Ω –î–∞–≤–∏–¥': 2.1,
    '–ú–∏–Ω—Ü –ú–∞—Ä–∫': 2.1,
    '–ú–æ–ª–æ–¥—Ü–æ–≤ –õ–µ–æ–Ω–∏–¥': 2.1,
    '–ù–æ–≤–æ–∂–µ–Ω–æ–≤ –Æ—Ä–∏–π': 2.1,
    '–ü–æ–ª—è–∫–æ–≤ –ù–∏–∫–∏—Ç–∞': 2.1,
    '–°–∞—Ä–≥—Å—è–Ω –≠–º–∏–ª–∏—è': 2.1,
    '–¢–∞–≤—Ä–∏–Ω–∞ –ú–∞—Ä–∏—è': 2.1,

    # –ì—Ä—É–ø–ø–∞ 2.2 - –®—É–ª—è–µ–≤ (13 —É—á–µ–Ω–∏–∫–æ–≤ - –±–µ–∑ –¢–∏—Ç–æ–≤–∞)
    '–ê–±–æ–ª–º–∞—Å–æ–≤–∞ –ê–Ω–Ω–∞': 2.2,
    '–í–∞—Å–∏–ª—å–µ–≤ –ú–∏—Ö–∞–∏–ª': 2.2,
    '–í–µ—Ä—Ö–æ—Ç—É—Ä–æ–≤–∞ –ê—Ä–∏–Ω–∞': 2.2,
    '–î–∞—Ä—Å–∏–≥–æ–≤ –î–∞–º–∏—Ä': 2.2,
    '–î—è–∫–∏–Ω–∞ –õ–µ—è': 2.2,
    '–ó–∏–º–∏–Ω–∞ –ú–∞—Ä–∏—è': 2.2,
    '–ö–∞–π—Ç–º–∞–∑–æ–≤ –ú–∞—Ä–∞—Ç': 2.2,
    '–ö–æ–Ω–¥—Ä–∞—Ç—é–∫ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞': 2.2,
    '–ö—É–ª—å–±–∞—Ä–∏—Å–æ–≤–∞ –¢–∞–∏—Ä–∞': 2.2,
    '–õ–æ–≥—É–Ω–æ–≤–∞ –ê—Ä–∏–Ω–∞': 2.2,
    '–ú–µ—Ä–∫–∞ –ï–≥–æ—Ä': 2.2,
    '–°–∞—Ö–∞—Ä–æ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞': 2.2,
    '–®–∞—Ä–æ–Ω–æ–≤–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞': 2.2,

    # –ì—Ä—É–ø–ø–∞ 3 - –§–∏—Å–µ–Ω–∫–æ (17 —É—á–µ–Ω–∏–∫–æ–≤ - —Å –õ–æ–≥—É–Ω–æ–≤–∞, –ë–ï–ó –†–∞—Ö–º–µ—Ç–æ–≤)
    '–ê–∫—Å–∞–∫–æ–≤–∞ –õ–∞–Ω–∞': 3,
    '–ê–ª–∏–µ–≤ –ê–¥–∞–º': 3,
    '–ê–Ω–¥—Ä–µ–µ–≤–∞ –ê—Ä–∏–Ω–∞': 3,
    '–ë–æ–±—Ä–æ–≤—Å–∫–∏–π –ú–∞—Ä–∫': 3,
    '–î–∂—É—Ä–∞–µ–≤ –ú–∞–Ω—Å—É—Ä': 3,
    '–î—é–∫–æ–≤–∞ –ú–∞—Ä–∏—è': 3,
    '–ò–≥–Ω–∞—Ö–∏–Ω–∞ –ü–æ–ª–∏–Ω–∞': 3,
    '–ö–∞—Ä–ø–æ–≤–∞ –ê–º–∞–ª–∏—è': 3,
    '–õ–∏—á–º–∞–Ω–æ–≤–∞ –î–∞—Ä—å—è': 3,
    '–ú–æ—á–∞–ª–æ–≤ –°–µ—Ä–≥–µ–π': 3,
    '–ü–∞—Ç–∏–Ω–∞ –ê–≥–∞—Ç–∞': 3,
    '–ü–µ—á–∞—Ç–∫–∏–Ω –õ–µ–≤': 3,
    '–†—ã–±–∏–Ω –ú–∞–∫—Å–∏–º': 3,
    '–°–æ–±–æ–¥–∞ –ú–∞—Ä–∏—è': 3,
    '–ß–∏—Ä–∫—É–Ω–æ–≤–∞ –¢–∞–∏—Å–∏—è': 3,
    '–®–∞–Ω–≥–∏–Ω–∞ –≠–ª–∏–Ω–∞': 3,
    '–®—É–ª—å–≥–∞ –ì—Ä–∏–≥–æ—Ä–∏–π': 3,
}

# –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 12.01.2026 (–Ø–ù–í–ê–†–¨ - —Ç–µ–∫—É—â–µ–µ –≤ –ë–î)
january_distribution = {
    # –ì—Ä—É–ø–ø–∞ 1 (5 —É—á–µ–Ω–∏–∫–æ–≤ - –¥–æ–±–∞–≤–∏–ª—Å—è –ö–æ—Ä–æ–ª—å –î–µ–Ω–∏—Å)
    '–ö–æ–Ω–¥—Ä–∞—à–∏–Ω –ú–∞—Ä–∫': 1,
    '–ö–æ—Ä–æ–ª—å –î–µ–Ω–∏—Å': 1,  # ‚Üê –ò–ó 2
    '–õ–æ–∑–æ–≤—Å–∫–∞—è –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞': 1,
    '–ú–≥–µ–±—Ä–æ–≤ –ê—Ä—Ç—ë–º': 1,
    '–°–∞—Ä–≥—Å—è–Ω –ú–∞—Ä–∏–∞–º': 1,

    # –ì—Ä—É–ø–ø–∞ 2 (7 —É—á–µ–Ω–∏–∫–æ–≤ - –¥–æ–±–∞–≤–∏–ª–∏—Å—å –õ–µ–π—Ç–µ—Å, –ú–∞—Ä—Ç–∏—Ä–æ—Å—è–Ω, –ù–æ–≤–æ–∂–µ–Ω–æ–≤, –¢–æ–∫–æ–≤–∏–Ω–∏–Ω; —É–±—ã–ª–∏ –ê–±–µ–ª—é–∫, –ö–æ—Ä–æ–ª—å, –†—ã–ª—å—Å–∫–∞—è)
    '–ë–∞–±–µ–Ω–∫–æ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞': 2,
    '–ö–æ—Å–º–∞—Ä—Å–∫–∏–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä': 2,
    '–õ–µ–π—Ç–µ—Å –ú–∞—Ä–∫': 2,  # ‚Üê –ò–ó 2.1
    '–ú–∞—Ä—Ç–∏—Ä–æ—Å—è–Ω –î–∞–≤–∏–¥': 2,  # ‚Üê –ò–ó 2.1
    '–ù–æ–≤–æ–∂–µ–Ω–æ–≤ –Æ—Ä–∏–π': 2,  # ‚Üê –ò–ó 2.1
    '–ü–µ—Ä–∏–Ω –î–∞–Ω–∏–∏–ª': 2,
    '–¢–æ–∫–æ–≤–∏–Ω–∏–Ω –ï—Ñ–∏–º': 2,  # ‚Üê –ù–û–í–´–ô

    # –ì—Ä—É–ø–ø–∞ 2.1 (12 —É—á–µ–Ω–∏–∫–æ–≤ - –¥–æ–±–∞–≤–∏–ª–∏—Å—å –ê–±–µ–ª—é–∫, –†—ã–ª—å—Å–∫–∞—è, –°—Ç—Ä–æ–∫–∞—Ç–æ–≤–∞; —É–±—ã–ª–∏ –õ–µ–π—Ç–µ—Å, –ú–∞—Ä—Ç–∏—Ä–æ—Å—è–Ω, –ù–æ–≤–æ–∂–µ–Ω–æ–≤, –ú–æ–ª–æ–¥—Ü–æ–≤)
    '–ê–±–µ–ª—é–∫ –ú–∞—Ä–∏—è': 2.1,  # ‚Üê –ò–ó 2
    '–ê–Ω–æ—à–∏–Ω –ú–∞—Ç–≤–µ–π': 2.1,
    '–ì–æ–Ω—Ç–∞—Ä–µ–≤ –ò–ª—å—è': 2.1,
    '–ï–≥–æ—Ä–æ–≤–∞ –ú–∏—Ä–æ—Å–ª–∞–≤–∞': 2.1,
    '–ö–∞—Ä–Ω–∞—É—Ö –¢–∏–º–æ—Ñ–µ–π': 2.1,
    '–ö–æ—Å—Ç–µ–Ω–∫–æ –ö–∞—Ä–æ–ª–∏–Ω–∞': 2.1,
    '–ú–∏–Ω—Ü –ú–∞—Ä–∫': 2.1,
    '–ü–æ–ª—è–∫–æ–≤ –ù–∏–∫–∏—Ç–∞': 2.1,
    '–†—ã–ª—å—Å–∫–∞—è –≠–≤–∏–ª–∏–Ω–∞': 2.1,  # ‚Üê –ò–ó 2
    '–°–∞—Ä–≥—Å—è–Ω –≠–º–∏–ª–∏—è': 2.1,
    '–°—Ç—Ä–æ–∫–∞—Ç–æ–≤–∞ –ö–∏—Ä–∞': 2.1,  # ‚Üê –ù–û–í–ê–Ø
    '–¢–∞–≤—Ä–∏–Ω–∞ –ú–∞—Ä–∏—è': 2.1,

    # –ì—Ä—É–ø–ø–∞ 2.2 (17 —É—á–µ–Ω–∏–∫–æ–≤ - –¥–æ–±–∞–≤–∏–ª–∏—Å—å –ú–æ–ª–æ–¥—Ü–æ–≤, –ë–µ–∫–º–µ—Ç–æ–≤, –ü–∞—Ç–∏–Ω–∞, –¢–∏—Ç–æ–≤–∞; —É–±—ã–ª–∞ –õ–æ–≥—É–Ω–æ–≤–∞)
    '–ê–±–æ–ª–º–∞—Å–æ–≤–∞ –ê–Ω–Ω–∞': 2.2,
    '–ë–µ–∫–º–µ—Ç–æ–≤ –î–º–∏—Ç—Ä–∏–π': 2.2,  # ‚Üê –ù–û–í–´–ô
    '–í–∞—Å–∏–ª—å–µ–≤ –ú–∏—Ö–∞–∏–ª': 2.2,
    '–í–µ—Ä—Ö–æ—Ç—É—Ä–æ–≤–∞ –ê—Ä–∏–Ω–∞': 2.2,
    '–î–∞—Ä—Å–∏–≥–æ–≤ –î–∞–º–∏—Ä': 2.2,
    '–î—è–∫–∏–Ω–∞ –õ–µ—è': 2.2,
    '–ó–∏–º–∏–Ω–∞ –ú–∞—Ä–∏—è': 2.2,
    '–ö–∞–π—Ç–º–∞–∑–æ–≤ –ú–∞—Ä–∞—Ç': 2.2,
    '–ö–æ–Ω–¥—Ä–∞—Ç—é–∫ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞': 2.2,
    '–ö—É–ª—å–±–∞—Ä–∏—Å–æ–≤–∞ –¢–∞–∏—Ä–∞': 2.2,
    '–õ–æ–≥—É–Ω–æ–≤–∞ –ê—Ä–∏–Ω–∞': 2.2,
    '–ú–µ—Ä–∫–∞ –ï–≥–æ—Ä': 2.2,
    '–ú–æ–ª–æ–¥—Ü–æ–≤ –õ–µ–æ–Ω–∏–¥': 2.2,  # ‚Üê –ò–ó 2.1
    '–ü–∞—Ç–∏–Ω–∞ –ê–≥–∞—Ç–∞': 2.2,  # ‚Üê –ò–ó 3
    '–°–∞—Ö–∞—Ä–æ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞': 2.2,
    '–¢–∏—Ç–æ–≤–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞': 2.2,  # ‚Üê –ù–û–í–ê–Ø
    '–®–∞—Ä–æ–Ω–æ–≤–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞': 2.2,

    # –ì—Ä—É–ø–ø–∞ 3 (18 —É—á–µ–Ω–∏–∫–æ–≤ - –¥–æ–±–∞–≤–∏–ª–∞—Å—å –õ–æ–≥—É–Ω–æ–≤–∞, –†–∞—Ö–º–µ—Ç–æ–≤; —É–±—ã–ª–∞ –ü–∞—Ç–∏–Ω–∞)
    '–ê–∫—Å–∞–∫–æ–≤–∞ –õ–∞–Ω–∞': 3,
    '–ê–ª–∏–µ–≤ –ê–¥–∞–º': 3,
    '–ê–Ω–¥—Ä–µ–µ–≤–∞ –ê—Ä–∏–Ω–∞': 3,
    '–ë–æ–±—Ä–æ–≤—Å–∫–∏–π –ú–∞—Ä–∫': 3,
    '–î–∂—É—Ä–∞–µ–≤ –ú–∞–Ω—Å—É—Ä': 3,
    '–î—é–∫–æ–≤–∞ –ú–∞—Ä–∏—è': 3,
    '–ò–≥–Ω–∞—Ö–∏–Ω–∞ –ü–æ–ª–∏–Ω–∞': 3,
    '–ö–∞—Ä–ø–æ–≤–∞ –ê–º–∞–ª–∏—è': 3,
    '–õ–∏—á–º–∞–Ω–æ–≤–∞ –î–∞—Ä—å—è': 3,
    '–õ–æ–≥—É–Ω–æ–≤–∞ –ê—Ä–∏–Ω–∞': 3,  # ‚Üê –ò–ó 2.2
    '–ú–æ—á–∞–ª–æ–≤ –°–µ—Ä–≥–µ–π': 3,
    '–ü–µ—á–∞—Ç–∫–∏–Ω –õ–µ–≤': 3,
    '–†–∞—Ö–º–µ—Ç–æ–≤ –ê—Ä—Ç—É—Ä': 3,  # ‚Üê –ù–û–í–´–ô
    '–†—ã–±–∏–Ω –ú–∞–∫—Å–∏–º': 3,
    '–°–æ–±–æ–¥–∞ –ú–∞—Ä–∏—è': 3,
    '–ß–∏—Ä–∫—É–Ω–æ–≤–∞ –¢–∞–∏—Å–∏—è': 3,
    '–®–∞–Ω–≥–∏–Ω–∞ –≠–ª–∏–Ω–∞': 3,
    '–®—É–ª—å–≥–∞ –ì—Ä–∏–≥–æ—Ä–∏–π': 3,
}


def add_history():
    print("üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≥—Ä—É–ø–ø...")
    print("=" * 80)

    # –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—É—é –∏—Å—Ç–æ—Ä–∏—é
    GroupHistory.objects.all().delete()
    print("‚úì –û—á–∏—â–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –∏—Å—Ç–æ—Ä–∏—è")

    groups = {g.number: g for g in Group.objects.all()}

    # 1. –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å–∏ –Ω–∞ 16.12.2025 (–¥–µ–∫–∞–±—Ä—å)
    print("\nüìÖ 16.12.2025 - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ –¥–µ–∫–∞–±—Ä–µ:")
    dec_count = 0
    for student_name, group_num in december_distribution.items():
        try:
            student = Student.objects.get(full_name=student_name)
            group = groups[group_num]

            GroupHistory.objects.create(
                student=student,
                group=group,
                transfer_date=date(2025, 12, 16),
                reason='–ù–∞—á–∞–ª–æ III —á–µ—Ç–≤–µ—Ä—Ç–∏'
            )
            print(f"  ‚úì {student_name} ‚Üí –ì—Ä—É–ø–ø–∞ {group_num}")
            dec_count += 1
        except Student.DoesNotExist:
            print(f"  ‚ö† –£—á–µ–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω: {student_name}")

    # 2. –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å–∏ –Ω–∞ 12.01.2026 (—è–Ω–≤–∞—Ä—å) - —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    print("\nüìÖ 12.01.2026 - –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏:")
    changes = []
    new_students = []

    for student_name, new_group_num in january_distribution.items():
        old_group_num = december_distribution.get(student_name)

        if old_group_num is None:
            # –ù–æ–≤—ã–π —É—á–µ–Ω–∏–∫ (–Ω–µ –±—ã–ª–æ –≤ –¥–µ–∫–∞–±—Ä–µ)
            try:
                student = Student.objects.get(full_name=student_name)
                group = groups[new_group_num]

                GroupHistory.objects.create(
                    student=student,
                    group=group,
                    transfer_date=date(2026, 1, 12),
                    reason='–ó–∞—á–∏—Å–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É'
                )

                # –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –≥—Ä—É–ø–ø—É
                student.current_group = group
                student.save()

                new_students.append(f"{student_name} ‚Üí {new_group_num}")
                print(f"  ‚ûï {student_name} ‚Üí –ì—Ä—É–ø–ø–∞ {new_group_num} (–Ω–æ–≤—ã–π)")
            except Student.DoesNotExist:
                print(f"  ‚ö† –£—á–µ–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω: {student_name}")

        elif old_group_num != new_group_num:
            # –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏
            try:
                student = Student.objects.get(full_name=student_name)
                group = groups[new_group_num]

                GroupHistory.objects.create(
                    student=student,
                    group=group,
                    transfer_date=date(2026, 1, 12),
                    reason=f'–ü–µ—Ä–µ—Ö–æ–¥ –∏–∑ –≥—Ä—É–ø–ø—ã {old_group_num}'
                )

                # –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –≥—Ä—É–ø–ø—É
                student.current_group = group
                student.save()

                changes.append(f"{student_name}: {old_group_num} ‚Üí {new_group_num}")
                print(f"  üîÑ {student_name}: –ì—Ä—É–ø–ø–∞ {old_group_num} ‚Üí {new_group_num}")
            except Student.DoesNotExist:
                print(f"  ‚ö† –£—á–µ–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω: {student_name}")

    print("\n" + "=" * 80)
    print(f"‚úÖ –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞!")
    print(f"\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:")
    print(f"  –ó–∞–ø–∏—Å–µ–π –≤ –¥–µ–∫–∞–±—Ä–µ: {dec_count}")
    print(f"  –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –≤ –∏—Å—Ç–æ—Ä–∏–∏: {GroupHistory.objects.count()}")
    print(f"  –ü–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏: {len(changes)}")
    print(f"  –ù–æ–≤—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤: {len(new_students)}")

    if changes:
        print(f"\nüîÑ –ü–µ—Ä–µ—Ö–æ–¥—ã (–¥–µ–∫–∞–±—Ä—å ‚Üí —è–Ω–≤–∞—Ä—å):")
        for i, change in enumerate(changes, 1):
            print(f"  {i}. {change}")

    if new_students:
        print(f"\n‚ûï –ù–æ–≤—ã–µ —É—á–µ–Ω–∏–∫–∏:")
        for i, student in enumerate(new_students, 1):
            print(f"  {i}. {student}")

    print("=" * 80)


if __name__ == '__main__':
    add_history()
